function FrontBase(){}function Auth(){var t=this;t.maskWrapper=$(".mask-wrapper"),t.scrollWrapper=$(".scroll-wrapper"),t.smsCaptcha=$(".sms-captcha-btn")}FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},FrontBase.prototype.run=function(){this.listenAuthBoxHover()},Auth.prototype.run=function(){var t=this;t.listenSHEvent(),t.listenSwitchEvent(),t.listenLoginEvent(),t.listenImgCaptchaEvent(),t.listenSmsCaptchaEvent(),t.listenRegistEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.listenSHEvent=function(){var t=this,n=$(".login-btn"),e=$(".regist-btn"),s=$(".close-btn");n.click(function(){t.scrollWrapper.css({left:0}),t.showEvent()}),e.click(function(){t.scrollWrapper.css({left:-400}),t.showEvent()}),s.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listenImgCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha?random="+Math.random())})},Auth.prototype.listenLoginEvent=function(){var s=this,a=$('.signin-group input[name="telephone"]'),o=$('.signin-group input[name="password"]'),i=$('.signin-group input[name="remember"]');$(".signin-group .submit-btn").click(function(){var t=a.val(),n=o.val(),e=i.prop("checked");myajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){s.hideEvent(),messageBox.showSuccess("登录成功",function(){setTimeout(window.location.reload())})}})})},Auth.prototype.listenRegistEvent=function(){$(".signup-group .submit-btn").click(function(t){console.log("click"),t.preventDefault();var n=$('.signup-group input[name="telephone"]'),e=$('.signup-group input[name="username"]'),s=$('.signup-group input[name="img_captcha"]'),a=$('.signup-group input[name="password1"]'),o=$('.signup-group input[name="password2"]'),i=$('.signup-group input[name="sms_captcha"]'),c=n.val(),p=e.val(),r=s.val(),u=a.val(),l=o.val(),h=i.val();myajax.post({url:"account/regist/",data:{telephone:c,username:p,img_captcha:r,password1:u,password2:l,sms_captcha:h},success:function(t){200==t.code&&window.location.reload()}})})},Auth.prototype.smsSuccessEvent=function(){var t=this;messageBox.showSuccess("验证码已发送，请注意查收！"),t.smsCaptcha.unbind(),t.smsCaptcha.addClass("disabled");var n=60,e=setInterval(function(){t.smsCaptcha.text(n+"s"),0==n&&(clearInterval(e),t.smsCaptcha.removeClass("disable"),t.smsCaptcha.text("发送验证码"),t.listenSmsCaptchaEvent()),n--},1e3)},Auth.prototype.listenSmsCaptchaEvent=function(){var n=this;n.smsCaptcha.click(function(){var t=$('.signup-group input[name="telephone"]').val();t?myajax.get({url:"/account/sms_captcha/",data:{telephone:t},success:function(t){200==t.code&&n.smsSuccessEvent()}}):messageBox.showError("请输入手机号码！")})},$(function(){(new Auth).run(),(new FrontBase).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInNlbGYiLCJ0aGlzIiwibWFza1dyYXBwZXIiLCIkIiwic2Nyb2xsV3JhcHBlciIsInNtc0NhcHRjaGEiLCJwcm90b3R5cGUiLCJsaXN0ZW5BdXRoQm94SG92ZXIiLCJhdXRoQm94IiwidXNlck1vcmVCb3giLCJob3ZlciIsInNob3ciLCJoaWRlIiwicnVuIiwibGlzdGVuU0hFdmVudCIsImxpc3RlblN3aXRjaEV2ZW50IiwibGlzdGVuTG9naW5FdmVudCIsImxpc3RlbkltZ0NhcHRjaGFFdmVudCIsImxpc3RlblNtc0NhcHRjaGFFdmVudCIsImxpc3RlblJlZ2lzdEV2ZW50Iiwic2hvd0V2ZW50IiwiaGlkZUV2ZW50IiwibG9naW5CdG4iLCJyZWdpc3RCdG4iLCJjbG9zZUJ0biIsImNsaWNrIiwiY3NzIiwibGVmdCIsImN1cnJlbnRMZWZ0IiwicGFyc2VJbnQiLCJhbmltYXRlIiwiaW1nQ2FwdGNoYSIsImF0dHIiLCJNYXRoIiwicmFuZG9tIiwidGVsZXRwaG9uZUlucHV0IiwicGFzc3dvcmRJbnB1dCIsInJlbWVtYmVySW5wdXQiLCJ0ZWxlcGhvbmUiLCJ2YWwiLCJwYXNzd29yZCIsInJlbWVtYmVyIiwicHJvcCIsIm15YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsIm1lc3NhZ2VCb3giLCJzaG93U3VjY2VzcyIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsImV2ZW50IiwiY29uc29sZSIsImxvZyIsInByZXZlbnREZWZhdWx0IiwidGVsZXBob25lSW5wdXQiLCJ1c2VybmFtZUlucHV0IiwiaW1nX2NhcHRjaGFJbnB1dCIsInBhc3N3b3JkMUlucHV0IiwicGFzc3dvcmQySW5wdXQiLCJzbXNfY2FwdGNoYUlucHV0IiwidXNlcm5hbWUiLCJpbWdfY2FwdGNoYSIsInBhc3N3b3JkMSIsInBhc3N3b3JkMiIsInNtc19jYXB0Y2hhIiwic21zU3VjY2Vzc0V2ZW50IiwidW5iaW5kIiwiYWRkQ2xhc3MiLCJjb3VudCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJ0ZXh0IiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUNsYXNzIiwiZ2V0Iiwic2hvd0Vycm9yIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxhQWtCVCxTQUFTQyxPQUNMLElBQUlDLEVBQU9DLEtBQ1hELEVBQUtFLFlBQWNDLEVBQUUsaUJBQ3JCSCxFQUFLSSxjQUFnQkQsRUFBRSxtQkFDdkJILEVBQUtLLFdBQWFGLEVBQUUsb0JBcEJ4QkwsVUFBVVEsVUFBVUMsbUJBQXFCLFdBQ3JDLElBQUlDLEVBQVVMLEVBQUUsYUFDWk0sRUFBY04sRUFBRSxrQkFDcEJLLEVBQVFFLE1BQU0sV0FDVkQsRUFBWUUsUUFDYixXQUNDRixFQUFZRyxVQUlwQmQsVUFBVVEsVUFBVU8sSUFBTSxXQUNYWixLQUNOTSxzQkFXVFIsS0FBS08sVUFBVU8sSUFBTSxXQUNqQixJQUFJYixFQUFPQyxLQUNYRCxFQUFLYyxnQkFDTGQsRUFBS2Usb0JBQ0xmLEVBQUtnQixtQkFDTGhCLEVBQUtpQix3QkFDTGpCLEVBQUtrQix3QkFDTGxCLEVBQUttQixxQkFHVHBCLEtBQUtPLFVBQVVjLFVBQVksV0FDWm5CLEtBQ05DLFlBQVlTLFFBR3JCWixLQUFLTyxVQUFVZSxVQUFZLFdBQ1pwQixLQUNOQyxZQUFZVSxRQUdyQmIsS0FBS08sVUFBVVEsY0FBZ0IsV0FDM0IsSUFBSWQsRUFBT0MsS0FDUHFCLEVBQVduQixFQUFFLGNBQ2JvQixFQUFZcEIsRUFBRSxlQUNkcUIsRUFBV3JCLEVBQUUsY0FDakJtQixFQUFTRyxNQUFNLFdBQ1h6QixFQUFLSSxjQUFjc0IsSUFBSSxDQUFDQyxLQUFPLElBQy9CM0IsRUFBS29CLGNBR1RHLEVBQVVFLE1BQU0sV0FDWnpCLEVBQUtJLGNBQWNzQixJQUFJLENBQUNDLE1BQVEsTUFDaEMzQixFQUFLb0IsY0FHVEksRUFBU0MsTUFBTSxXQUVYekIsRUFBS3FCLGVBSWJ0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dCI6WyJmdW5jdGlvbiBGcm9udEJhc2UoKXt9XHJcblxyXG5Gcm9udEJhc2UucHJvdG90eXBlLmxpc3RlbkF1dGhCb3hIb3ZlciA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgYXV0aEJveCA9ICQoJy5hdXRoLWJveCcpXHJcbiAgICB2YXIgdXNlck1vcmVCb3ggPSAkKCcudXNlci1tb3JlLWJveCcpXHJcbiAgICBhdXRoQm94LmhvdmVyKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdXNlck1vcmVCb3guc2hvdygpXHJcbiAgICB9LCBmdW5jdGlvbigpe1xyXG4gICAgICAgIHVzZXJNb3JlQm94LmhpZGUoKVxyXG4gICAgfSlcclxufVxyXG5cclxuRnJvbnRCYXNlLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5BdXRoQm94SG92ZXIoKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIEF1dGgoKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIgPSAkKCcubWFzay13cmFwcGVyJyk7XHJcbiAgICBzZWxmLnNjcm9sbFdyYXBwZXIgPSAkKCcuc2Nyb2xsLXdyYXBwZXInKTtcclxuICAgIHNlbGYuc21zQ2FwdGNoYSA9ICQoJy5zbXMtY2FwdGNoYS1idG4nKTtcclxufVxyXG5cclxuQXV0aC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGlzdGVuU0hFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5Td2l0Y2hFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5Mb2dpbkV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlbkltZ0NhcHRjaGFFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuUmVnaXN0RXZlbnQoKTtcclxufVxyXG5cclxuQXV0aC5wcm90b3R5cGUuc2hvd0V2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIuc2hvdygpXHJcbn1cclxuXHJcbkF1dGgucHJvdG90eXBlLmhpZGVFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLm1hc2tXcmFwcGVyLmhpZGUoKVxyXG59XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TSEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBsb2dpbkJ0biA9ICQoJy5sb2dpbi1idG4nKTtcclxuICAgIHZhciByZWdpc3RCdG4gPSAkKCcucmVnaXN0LWJ0bicpO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgbG9naW5CdG4uY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKHsnbGVmdCc6MH0pXHJcbiAgICAgICAgc2VsZi5zaG93RXZlbnQoKVxyXG4gICAgfSlcclxuXHJcbiAgICByZWdpc3RCdG4uY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKHsnbGVmdCc6LTQwMH0pXHJcbiAgICAgICAgc2VsZi5zaG93RXZlbnQoKVxyXG4gICAgfSlcclxuXHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICBzZWxmLmhpZGVFdmVudCgpXHJcbiAgICB9KVxyXG59XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5Td2l0Y2hFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc3dpdGNoZXIgPSAkKFwiLnN3aXRjaFwiKTtcclxuICAgIHN3aXRjaGVyLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudExlZnQgPSBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKFwibGVmdFwiKTtcclxuICAgICAgICBjdXJyZW50TGVmdCA9IHBhcnNlSW50KGN1cnJlbnRMZWZ0KTtcclxuICAgICAgICBpZihjdXJyZW50TGVmdCA8IDApe1xyXG4gICAgICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuYW5pbWF0ZSh7XCJsZWZ0XCI6JzAnfSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcImxlZnRcIjpcIi00MDBweFwifSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlbkltZ0NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgaW1nQ2FwdGNoYSA9ICQoJy5pbWctY2FwdGNoYScpXHJcbiAgICBpbWdDYXB0Y2hhLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaW1nQ2FwdGNoYS5hdHRyKCdzcmMnLCcvYWNjb3VudC9pbWdfY2FwdGNoYT9yYW5kb209JyArIE1hdGgucmFuZG9tKCkpXHJcbiAgICB9KVxyXG59XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5Mb2dpbkV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0ZWxldHBob25lSW5wdXQgPSAkKCcuc2lnbmluLWdyb3VwIGlucHV0W25hbWU9XCJ0ZWxlcGhvbmVcIl0nKTtcclxuICAgIHZhciBwYXNzd29yZElucHV0ID0gJCgnLnNpZ25pbi1ncm91cCBpbnB1dFtuYW1lPVwicGFzc3dvcmRcIl0nKTtcclxuICAgIHZhciByZW1lbWJlcklucHV0ID0gJCgnLnNpZ25pbi1ncm91cCBpbnB1dFtuYW1lPVwicmVtZW1iZXJcIl0nKTtcclxuICAgIHZhciBsb2dpbkJ0biA9ICQoJy5zaWduaW4tZ3JvdXAgLnN1Ym1pdC1idG4nKTtcclxuICAgIGxvZ2luQnRuLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGV0cGhvbmVJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQgPSBwYXNzd29yZElucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciByZW1lbWJlciA9IHJlbWVtYmVySW5wdXQucHJvcCgnY2hlY2tlZCcpO1xyXG4gICAgICAgIC8vIHZhciBjc3JmX3Rva2VuID0gJCgnc2lnbmluLWdyb3VwIGlucHV0W25hbWU9XCJjc3JmbWlkZGxld2FyZXRva2VuXCJdJykudmFsKCk7XHJcbiAgICAgICAgLy8gQWpheFxyXG4gICAgICAgIG15YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvYWNjb3VudC9sb2dpbi8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmUsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzd29yZCxcclxuICAgICAgICAgICAgICAgICdyZW1lbWJlcic6IHJlbWVtYmVyPzE6MCxcclxuICAgICAgICAgICAgICAgIC8vICdjc3JmX3Rva2VuJzogY3NyZl90b2tlblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlQm94LnNob3dTdWNjZXNzKCfnmbvlvZXmiJDlip8nLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQod2luZG93LmxvY2F0aW9uLnJlbG9hZCgpKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxufVxyXG5cclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblJlZ2lzdEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzdWJtaXRCdG4gPSAkKCcuc2lnbnVwLWdyb3VwIC5zdWJtaXQtYnRuJyk7XHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdjbGljaycpXHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgdGVsZXBob25lSW5wdXQgPSAkKCcuc2lnbnVwLWdyb3VwIGlucHV0W25hbWU9XCJ0ZWxlcGhvbmVcIl0nKTtcclxuICAgICAgICB2YXIgdXNlcm5hbWVJbnB1dCA9ICQoJy5zaWdudXAtZ3JvdXAgaW5wdXRbbmFtZT1cInVzZXJuYW1lXCJdJyk7XHJcbiAgICAgICAgdmFyIGltZ19jYXB0Y2hhSW5wdXQgPSAkKCcuc2lnbnVwLWdyb3VwIGlucHV0W25hbWU9XCJpbWdfY2FwdGNoYVwiXScpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZDFJbnB1dCA9ICQoJy5zaWdudXAtZ3JvdXAgaW5wdXRbbmFtZT1cInBhc3N3b3JkMVwiXScpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZDJJbnB1dCA9ICQoJy5zaWdudXAtZ3JvdXAgaW5wdXRbbmFtZT1cInBhc3N3b3JkMlwiXScpO1xyXG4gICAgICAgIHZhciBzbXNfY2FwdGNoYUlucHV0ID0gJCgnLnNpZ251cC1ncm91cCBpbnB1dFtuYW1lPVwic21zX2NhcHRjaGFcIl0nKTtcclxuXHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciB1c2VybmFtZSA9IHVzZXJuYW1lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIGltZ19jYXB0Y2hhID0gaW1nX2NhcHRjaGFJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQxID0gcGFzc3dvcmQxSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMiA9IHBhc3N3b3JkMklucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBzbXNfY2FwdGNoYSA9IHNtc19jYXB0Y2hhSW5wdXQudmFsKCk7XHJcblxyXG4gICAgICAgIG15YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICdhY2NvdW50L3JlZ2lzdC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6IHRlbGVwaG9uZSxcclxuICAgICAgICAgICAgICAgICd1c2VybmFtZSc6IHVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgJ2ltZ19jYXB0Y2hhJzogaW1nX2NhcHRjaGEsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQxJzogcGFzc3dvcmQxLFxyXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkMic6IHBhc3N3b3JkMixcclxuICAgICAgICAgICAgICAgICdzbXNfY2FwdGNoYSc6IHNtc19jYXB0Y2hhXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24ocmVzdWx0KXtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcbn1cclxuXHJcblxyXG5BdXRoLnByb3RvdHlwZS5zbXNTdWNjZXNzRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgbWVzc2FnZUJveC5zaG93U3VjY2Vzcygn6aqM6K+B56CB5bey5Y+R6YCB77yM6K+35rOo5oSP5p+l5pS277yBJylcclxuICAgIHNlbGYuc21zQ2FwdGNoYS51bmJpbmQoKTtcclxuICAgIHNlbGYuc21zQ2FwdGNoYS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgIHZhciBjb3VudCA9IDYwO1xyXG4gICAgdmFyIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcclxuICAgICAgICBzZWxmLnNtc0NhcHRjaGEudGV4dChjb3VudCArICdzJylcclxuICAgICAgICBpZiAoY291bnQgPT0gMCl7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xyXG4gICAgICAgICAgICBzZWxmLnNtc0NhcHRjaGEucmVtb3ZlQ2xhc3MoJ2Rpc2FibGUnKTtcclxuICAgICAgICAgICAgc2VsZi5zbXNDYXB0Y2hhLnRleHQoJ+WPkemAgemqjOivgeeggScpO1xyXG4gICAgICAgICAgICBzZWxmLmxpc3RlblNtc0NhcHRjaGFFdmVudCgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvdW50IC0tO1xyXG4gICAgfSwxMDAwKVxyXG59XHJcblxyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU21zQ2FwdGNoYUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuc21zQ2FwdGNoYS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9ICQoJy5zaWdudXAtZ3JvdXAgaW5wdXRbbmFtZT1cInRlbGVwaG9uZVwiXScpO1xyXG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcclxuICAgICAgICBpZiAoIXRlbGVwaG9uZSl7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VCb3guc2hvd0Vycm9yKCfor7fovpPlhaXmiYvmnLrlj7fnoIHvvIEnKVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBteWFqYXguZ2V0KHtcclxuICAgICAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvc21zX2NhcHRjaGEvJyxcclxuICAgICAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zbXNTdWNjZXNzRXZlbnQoKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfSlcclxufVxyXG5cclxuJChmdW5jdGlvbigpe1xyXG4gICAgdmFyIGF1dGggPSBuZXcgQXV0aCgpXHJcbiAgICBhdXRoLnJ1bigpXHJcblxyXG4gICAgdmFyIGZyb250QmFzZSA9IG5ldyBGcm9udEJhc2UoKTtcclxuICAgIGZyb250QmFzZS5ydW4oKTtcclxufSlcclxuIl19
