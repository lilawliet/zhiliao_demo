function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){this.next_page=2,this.category_id=0}Banner.prototype.initBanner=function(){var n=this,e=n.liList.eq(0).clone(),t=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(e),n.bannerUl.prepend(t),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,e=0;e<n.bannerCount;e++){var t=$("<li></li>");n.pageControl.append(t),0===e&&t.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.toggleArrow=function(n){var e=this;n?(e.leftArrow.show(),e.rightArrow.show()):(e.leftArrow.hide(),e.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.stop().animate({left:-798*n.index},500);var e=n.index;e=0===e?n.bannerCount-1:e===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(e).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var t=this;t.pageControl.children("li").each(function(n,e){$(e).click(function(){t.index=n,t.animate()})})},Banner.prototype.run=function(){this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$(".load-more");r.click(function(){myajax.get({url:"/news/list/",data:{category_id:i.category_id,p:i.next_page},success:function(n){if(200===n.code){var e=n.data;if(0<e.length){var t=template("news-item",{newses:e});$(".list-inner-group").append(t),i.next_page++}else r.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var r=this;$(".list-tab").children().click(function(){var i=$(this);r.category_id=i.attr("data-category"),r.next_page=1,myajax.get({url:"/news/list/",data:{category_id:r.category_id,p:r.next_page},success:function(n){if(200===n.code){var e=n.data,t=template("news-item",{newses:e});$(".list-inner-group").empty(),$(".list-inner-group").append(t),r.next_page=2,i.addClass("active").siblings().removeClass("active"),$(".load-more").show()}}})})},$(function(){(new Banner).run(),(new Index).run();!function(){if(void 0===n){var n="a";console.log(n)}else console.log("undefined")}()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJuZXh0X3BhZ2UiLCJjYXRlZ29yeV9pZCIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJzZWxmIiwiZmlyc3RCYW5uZXIiLCJlcSIsImNsb25lIiwibGFzdEJhbm5lciIsImFwcGVuZCIsInByZXBlbmQiLCJjc3MiLCJ3aWR0aCIsImxlZnQiLCJpbml0UGFnZUNvbnRyb2wiLCJpIiwiY2lyY2xlIiwiYWRkQ2xhc3MiLCJ0b2dnbGVBcnJvdyIsImlzU2hvdyIsInNob3ciLCJoaWRlIiwiYW5pbWF0ZSIsInN0b3AiLCJzaWJsaW5ncyIsInJlbW92ZUNsYXNzIiwibG9vcCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJsaXN0ZW5BcnJvd0NsaWNrIiwiY2xpY2siLCJsaXN0ZW5CYW5uZXJIb3ZlciIsImhvdmVyIiwiY2xlYXJJbnRlcnZhbCIsImxpc3RlblBhZ2VDb250cm9sIiwiZWFjaCIsIm9iaiIsInJ1biIsImxpc3RlbkxvYWRNb3JlRXZlbnQiLCJsaXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50IiwibG9hZE1vcmVCdG4iLCJteWFqYXgiLCJnZXQiLCJ1cmwiLCJkYXRhIiwicCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJuZXdzZXMiLCJ0cGwiLCJ0ZW1wbGF0ZSIsImxpIiwiYXR0ciIsImVtcHR5IiwibmFtZSIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiJBQXNCQSxTQUFTQSxTQUNMQyxLQUFLQyxZQUFjLElBQ25CRCxLQUFLRSxZQUFjQyxFQUFFLGlCQUNyQkgsS0FBS0ksTUFBUSxFQUNiSixLQUFLSyxVQUFZRixFQUFFLGVBQ25CSCxL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cEI0QyxFQUFLekMsRUFBS0osV0FFZDhDLFFBQVcsU0FBU0MsR0FDaEIsR0FBc0IsTUFBbkJBLEVBQWEsS0FBVSxDQUN0QixJQUFJQyxFQUFTRCxFQUFhLEtBQ3RCRSxFQUFNQyxTQUFTLFlBQWEsQ0FBQ0YsT0FBVUEsSUFDM0MzRCxFQUFFLHFCQUFxQmdFLFFBQ3ZCaEUsRUFBRSxxQkFBcUJvQixPQUFPd0MsR0FDOUI3QyxFQUFLSixVQUFZLEVBQ2pCbUQsRUFBR2xDLFNBQVMsVUFBVU8sV0FBV0MsWUFBWSxVQUM3Q3BDLEVBQUUsY0FBYytCLGNBUXBDL0IsRUFBRSxZQUNlLElBQUlKLFFBQ1ZvRCxPQUVLLElBQUl0QyxPQUNWc0MsT0FHTixXQUNJLFFBQW9CLElBQVRpQixFQUFxQixDQUM1QixJQUFJQSxFQUFPLElBQ1hDLFFBQVFDLElBQUlGLFFBRVpDLFFBQVFDLElBQUksYUFMcEIiLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8g6Z2i5ZCR5a+56LGhXHJcbi8vIDEuIOa3u+WKoOWxnuaAp1xyXG4vLyDpgJrov4d0aGlz5YWz6ZSu5a2X77yM57uR5a6a5bGe5oCn77yM5bm25LiU5oyH5a6a5LuW55qE5YC844CCXHJcbi8vIOWOn+Wei+mTvlxyXG4vLyAyLiDmt7vliqDmlrnms5VcclxuLy8g5ZyoQmFubmVyLnByb3RvdHlwZeS4iue7keWumuaWueazleWwseWPr+S7peS6huOAglxyXG5cclxuLy8gZnVuY3Rpb24gQmFubmVyKCkge1xyXG4vLyAgICAgLy8g6L+Z5Liq6YeM6Z2i5YaZ55qE5Luj56CBXHJcbi8vICAgICAvLyDnm7jlvZPkuo7mmK9QeXRob27kuK3nmoRfX2luaXRfX+aWueazleeahOS7o+eggVxyXG4vLyAgICAgY29uc29sZS5sb2coJ+aehOmAoOWHveaVsCcpO1xyXG4vLyAgICAgdGhpcy5wZXJzb24gPSAnemhpbGlhbyc7XHJcbi8vIH1cclxuLy9cclxuLy8gQmFubmVyLnByb3RvdHlwZS5ncmVldCA9IGZ1bmN0aW9uICh3b3JkKSB7XHJcbi8vICAgICBjb25zb2xlLmxvZygnaGVsbG8gJyx3b3JkKTtcclxuLy8gfTtcclxuLy9cclxuLy8gdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcclxuLy8gY29uc29sZS5sb2coYmFubmVyLnBlcnNvbik7XHJcbi8vIGJhbm5lci5ncmVldCgnemhpbGlhbycpO1xyXG5cclxuZnVuY3Rpb24gQmFubmVyKCkge1xyXG4gICAgdGhpcy5iYW5uZXJXaWR0aCA9IDc5ODtcclxuICAgIHRoaXMuYmFubmVyR3JvdXAgPSAkKFwiI2Jhbm5lci1ncm91cFwiKTtcclxuICAgIHRoaXMuaW5kZXggPSAxO1xyXG4gICAgdGhpcy5sZWZ0QXJyb3cgPSAkKFwiLmxlZnQtYXJyb3dcIik7XHJcbiAgICB0aGlzLnJpZ2h0QXJyb3cgPSAkKFwiLnJpZ2h0LWFycm93XCIpO1xyXG4gICAgdGhpcy5iYW5uZXJVbCA9ICQoXCIjYmFubmVyLXVsXCIpO1xyXG4gICAgdGhpcy5saUxpc3QgPSB0aGlzLmJhbm5lclVsLmNoaWxkcmVuKFwibGlcIik7XHJcbiAgICB0aGlzLmJhbm5lckNvdW50ID0gdGhpcy5saUxpc3QubGVuZ3RoO1xyXG4gICAgdGhpcy5wYWdlQ29udHJvbCA9ICQoXCIucGFnZS1jb250cm9sXCIpO1xyXG59XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRCYW5uZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgZmlyc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcSgwKS5jbG9uZSgpO1xyXG4gICAgdmFyIGxhc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcShzZWxmLmJhbm5lckNvdW50LTEpLmNsb25lKCk7XHJcbiAgICBzZWxmLmJhbm5lclVsLmFwcGVuZChmaXJzdEJhbm5lcik7XHJcbiAgICBzZWxmLmJhbm5lclVsLnByZXBlbmQobGFzdEJhbm5lcik7XHJcbiAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJ3aWR0aFwiOnNlbGYuYmFubmVyV2lkdGgqKHNlbGYuYmFubmVyQ291bnQrMiksJ2xlZnQnOi1zZWxmLmJhbm5lcldpZHRofSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRQYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIGZvcih2YXIgaT0wOyBpPHNlbGYuYmFubmVyQ291bnQ7IGkrKyl7XHJcbiAgICAgICAgdmFyIGNpcmNsZSA9ICQoXCI8bGk+PC9saT5cIik7XHJcbiAgICAgICAgc2VsZi5wYWdlQ29udHJvbC5hcHBlbmQoY2lyY2xlKTtcclxuICAgICAgICBpZihpID09PSAwKXtcclxuICAgICAgICAgICAgY2lyY2xlLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY3NzKHtcIndpZHRoXCI6c2VsZi5iYW5uZXJDb3VudCoxMis4KjIrMTYqKHNlbGYuYmFubmVyQ291bnQtMSl9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUudG9nZ2xlQXJyb3cgPSBmdW5jdGlvbiAoaXNTaG93KSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBpZihpc1Nob3cpe1xyXG4gICAgICAgIHNlbGYubGVmdEFycm93LnNob3coKTtcclxuICAgICAgICBzZWxmLnJpZ2h0QXJyb3cuc2hvdygpO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgc2VsZi5sZWZ0QXJyb3cuaGlkZSgpO1xyXG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5oaWRlKCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmFuaW1hdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmJhbm5lclVsLnN0b3AoKS5hbmltYXRlKHtcImxlZnRcIjotNzk4KnNlbGYuaW5kZXh9LDUwMCk7XHJcbiAgICB2YXIgaW5kZXggPSBzZWxmLmluZGV4O1xyXG4gICAgaWYoaW5kZXggPT09IDApe1xyXG4gICAgICAgIGluZGV4ID0gc2VsZi5iYW5uZXJDb3VudC0xO1xyXG4gICAgfWVsc2UgaWYoaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQrMSl7XHJcbiAgICAgICAgaW5kZXggPSAwO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgaW5kZXggPSBzZWxmLmluZGV4IC0gMTtcclxuICAgIH1cclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oJ2xpJykuZXEoaW5kZXgpLmFkZENsYXNzKFwiYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5sb29wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihzZWxmLmluZGV4ID49IHNlbGYuYmFubmVyQ291bnQrMSl7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0sMjAwMCk7XHJcbn07XHJcblxyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5BcnJvd0NsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5sZWZ0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHNlbGYuaW5kZXggPT09IDApe1xyXG4gICAgICAgICAgICAvLyA9Pe+8mjEgPT0gJzEn77yadHJ1ZVxyXG4gICAgICAgICAgICAvLyA9PT09IDEgIT0gJzEnXHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJDb3VudCpzZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBzZWxmLmJhbm5lckNvdW50IC0gMTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgc2VsZi5pbmRleC0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBzZWxmLnJpZ2h0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHNlbGYuaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQgKyAxKXtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOi1zZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkJhbm5lckhvdmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy5iYW5uZXJHcm91cC5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8g56ys5LiA5Liq5Ye95pWw5piv77yM5oqK6byg5qCH56e75Yqo5YiwYmFubmVy5LiK5Lya5omn6KGM55qE5Ye95pWwXHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLnRpbWVyKTtcclxuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KHRydWUpO1xyXG4gICAgfSxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8g56ys5LqM5Liq5Ye95pWw5piv77yM5oqK6byg5qCH5LuOYmFubmVy5LiK56e76LWw5Lya5omn6KGM55qE5Ye95pWwXHJcbiAgICAgICAgc2VsZi5sb29wKCk7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyhmYWxzZSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsb2JqKSB7XHJcbiAgICAgICAgJChvYmopLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmluaXRCYW5uZXIoKTtcclxuICAgIHRoaXMuaW5pdFBhZ2VDb250cm9sKCk7XHJcbiAgICB0aGlzLmxvb3AoKTtcclxuICAgIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKTtcclxuICAgIHRoaXMubGlzdGVuQXJyb3dDbGljaygpO1xyXG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gSW5kZXgoKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubmV4dF9wYWdlID0gMjtcclxuICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSAwO1xyXG59XHJcblxyXG5JbmRleC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGlzdGVuTG9hZE1vcmVFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50KCk7XHJcbn1cclxuXHJcbkluZGV4LnByb3RvdHlwZS5saXN0ZW5Mb2FkTW9yZUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBsb2FkTW9yZUJ0biA9ICQoJy5sb2FkLW1vcmUnKTtcclxuICAgIGxvYWRNb3JlQnRuLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgbXlhamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL25ld3MvbGlzdC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IHNlbGYuY2F0ZWdvcnlfaWQsXHJcbiAgICAgICAgICAgICAgICAncCc6IHNlbGYubmV4dF9wYWdlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24ocmVzdWx0KXtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgICAgICBpZihuZXdzZXMubGVuZ3RoID4wKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKCduZXdzLWl0ZW0nLCB7J25ld3Nlcyc6IG5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKCcubGlzdC1pbm5lci1ncm91cCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bC5hcHBlbmQodHBsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5uZXh0X3BhZ2UgKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRNb3JlQnRuLmhpZGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5JbmRleC5wcm90b3R5cGUubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdGFiR3JvdXAgPSAkKCcubGlzdC10YWInKTtcclxuICAgIHRhYkdyb3VwLmNoaWxkcmVuKCkuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgbGkgPSAkKHRoaXMpO1xyXG4gICAgICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSBsaS5hdHRyKCdkYXRhLWNhdGVnb3J5Jyk7XHJcbiAgICAgICAgc2VsZi5uZXh0X3BhZ2UgPSAxO1xyXG4gICAgICAgIG15YWpheC5nZXQoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9uZXdzL2xpc3QvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOiBzZWxmLmNhdGVnb3J5X2lkLFxyXG4gICAgICAgICAgICAgICAgJ3AnOiBzZWxmLm5leHRfcGFnZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c2VzID0gcmVzdWx0WydkYXRhJ107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKCduZXdzLWl0ZW0nLCB7J25ld3Nlcyc6IG5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5saXN0LWlubmVyLWdyb3VwJykuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubGlzdC1pbm5lci1ncm91cCcpLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubmV4dF9wYWdlID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWQtbW9yZScpLnNob3coKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XHJcbiAgICBiYW5uZXIucnVuKCk7XHJcblxyXG4gICAgdmFyIGluZGV4ID0gbmV3IEluZGV4KCk7XHJcbiAgICBpbmRleC5ydW4oKTtcclxuXHJcbiAgICB2YXIgbmFtZSA9ICd3b3JsZCc7XHJcbiAgICAoZnVuY3Rpb24oKXtcclxuICAgICAgICBpZiAodHlwZW9mIG5hbWUgPT09ICd1bmRlZmluZWQnKXtcclxuICAgICAgICAgICAgdmFyIG5hbWUgPSAnYSdcclxuICAgICAgICAgICAgY29uc29sZS5sb2cobmFtZSlcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgfVxyXG4gICAgfSkoKTtcclxufSk7XHJcblxyXG5cclxuIl19
